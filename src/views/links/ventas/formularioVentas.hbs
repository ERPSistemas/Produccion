<style>
   input[type=checkbox] { transform: scale(1.5); } 

</style>
{{!-- formulario para dar de alta un pedido con los campos que se requieren segun las especificaciones dichas anteriormente --}}
<div class="container">
  <button type="button" class="close" aria-label="Close"> <a href="/menu"><span aria-hidden="true">&times;</a> </span></button>
</div>
<form action="/ventas/add" enctype="multipart/form-data" method="post" id="imgct" class="columinput">
   <div class="container">
      <div class="form-group row  justify-content-center ">
        <label for="oc" class="col-sm-2 col-form-label">*Orden de Compra:</label>
        <div class="col-sm-6">
          <input type="text" class="form-control valid border border-secondary" name="orden" id="validationTooltip01" pattern="[A-Za-z0-9]+" title="Campo Obligatorio"required>
            <input type="file" id="gimg" name="gimg" class="form-control-file"/>
        </div>
      </div>
      <div >
      <br>
      </div>

      <div class="form-group row justify-content-center">
        <label for="" class="col-sm-2 col-form-label">No. de Pedido:</label>
        <div class="col-sm-6">
          <input type="text"  class="form-control valid border border-secondary" name="numeroCotizacion" pattern="[A-Za-z0-9]+" title="Campo Obligatorio" required>
          {{!-- <div class="container"> --}}
            <input type="file" class="form-control-file " name="gimg" id="gimg" style="color: black;" required>
          {{!-- </div> --}}
        </div>
      </div>
      <br>
      <center>
      <div id="inputCliente"></div> 
      </center> 
     
      <div class="form-group row justify-content-center"> 
        <label for="" class="col-sm-2 col-form-label">Cliente:</label>
        <div class="col-sm-6">
          {{#each cliente }}
          <input type="text"  class="form-control border border-secondary" value="{{nombre}}" name="cliente" >
          {{/each}}
        <button type="button" class="btn btn-dark btn-lg btn-block "  id="prueba" data-toggle="modal" data-target="#staticBackdrop"  href="/ventas/busquedaCliente" role="button" aria-expanded="false" aria-controls="collapseExample">
        Tus Clientes
        </button>
        </div>
      </div>

    
<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">Options</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-bodyss">
          <center>Busqueda Cliente: <input type="text"  id="inputBusqueda" class="col-sm-8"></center>

       <div id="clientesPorBusqueda"></div>
          <div id="clientes"><br> 
           <div id="ocultar" >  
          <table class="table table-bordered-responsive-sm justify-content-center">
           <thead class="thead-light">
           <tr>
             <th scope="col">NOMBRE</th>
             <th scope="col">ID</th>
             <th scope="col">BUSCAR</th>
           </tr>
         </thead >
           {{#each clientes}}
           <tr>
               <td>{{nombre}}</td>
               <td>{{numero_interno}}</td>
               <td> <center> <button type="button"  onclick="clientes('{{nombre}}')" class="btn btn-success" data-dismiss="modal">Seleccionar</button></center></td>
           </tr>
           {{/each}}
         </table>
         </div>
        </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container" style="background-color:#FFFFFF;">
      <div class="form-group row justify-content-center">
        <label for=""  class="col-sm-2 col-form-label ">Ruta:</label>
        <div class="col-sm-6">
        <select class="form-control border border-secondary "  name="ruta" >
          <option value="1">Norte</option>
          <option value="2">Sur</option>
        </select>
        </div>
      </div> 

      <div class="form-group row justify-content-center">
        <label for="" class="col-sm-2 col-form-label">Importe:</label>
        <div class="col-sm-6">
          <div class="input-group-prepend">
          <span class="input-group-text border border-secondary" >$</span>
          <input type="text"  class="form-control border border-secondary" name="importe" required pattern="^[0-9]{1,9}(\.[0-9]{0,2})?$" >
          
        </div>
        </div>
      </div>
      
    {{!-- FALTA POR DEFINIR QUE CAMPOS SE VAN A NECESITAR
    Y COMO VA SER SU REQUERIMIENTO --}}
    <div class="form-group row justify-content-center">
    <div class="form-check form-check-inline">
    <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1">
    <label class="form-check-label" for="inlineCheckbox1">Contra Entrega</label>
    </div>

    <div class="form-check form-check-inline">
    <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2">
    <label class="form-check-label" for="inlineCheckbox2">Crédito</label>
    </div>

    <div class="form-check form-check-inline">
      <input class="form-check-input" type="checkbox" id="inlineCheckbox3" value="option3">
      <label class="form-check-label">Transferencia</label>
    </div>
    </div>
   
    {{!-- opciones de pago para el cliente --}}
      {{!-- <div class="form-group row justify-content-center">
      <label for="" class="col-sm-2 col-form-label">Tipo de Pago:</label>
      <div class="col-sm-6">
      <select class="custom-select">
      <option selected>Open this select menu</option>
      <option value="1">Contra Entrega</option>
      <option value="2">Crédito</option>
      <option value="3">Transferencia</option>
      </select>
      </div>
      </div> --}}
    {{!-- fin de opciones de pago --}}


      <div class="form-group row justify-content-center">
        <label for="" class="col-sm-2 col-form-label" >Observaciones:</label>
        <div class="col-sm-6">
        <textarea class="form-control border border-secondary"  name="observaciones" title="En caso de ques sea necesario poner observaciones" rows="2"></textarea>
      </div>
      </div>
      <br>
      <div class="form-group row justify-content-center">
        <label for="" class="col-sm-2 col-form-label" ></label>
        <div class="col-sm-4">
          <input type="submit" class="btn btn-success btn-lg btn-block" value="Guardar" id="nvig" />
        </div>
      </div>
    </div> 
 </form>

{{!-- codigo javascript --}}
 <script
  src="https://code.jquery.com/jquery-3.4.1.js"
  integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
  crossorigin="anonymous"></script>

<script type=" text/javascript">
    $('#clientesPorBusqueda').hide();

  $("#prueba").click(function (e) {
      $('.col-sm-8').val('');
      $("#ocultar").show();
      $("#clientesPorBusqueda").hide(); 
      $('#inputBusqueda').keyup(function (e) {  
     if($('#inputBusqueda').val()){ 
        $.post("/ventas",{busqueda: $("#inputBusqueda").val()},function (data) {
          $("#ocultar").hide(); 
            let tabla  = `<table class="table table-bordered-responsive-sm">
                <thead class="thead-light">
           <tr>
             <th scope="col">NOMBRE</th>
             <th scope="col">ID</th>
             <th scope="col">BUSCAR</th>
           </tr>
         </thead>`; 
            data.forEach(data => {
                tabla+= `
                  <tr>
                    <td>${data.nombre}</td>
                    <td>${data.numero_interno}</td>
                    <td><button type="button" onclick="clientes('${data.nombre}')" class="btn btn-success" data-dismiss="modal">Seleccionar</button></td>
                  </tr> 
                `
            });
            tabla  += "</table>"; 
            $("#clientesPorBusqueda").show();
            document.getElementById('clientesPorBusqueda').innerHTML  = tabla; 
            console.log(tabla); 
              
        });
       }
     }); 
    });

    let clientes = (nombre)=>{
      let mandar  = `
        <div class="form-group row justify-content-center ">
        <label for="" class="col-sm-2 col-form-label"></label>
        <div class="col-sm-6">
          <input type="text"  class="form-control valid border border-secondary" value="${nombre}" name="nombre">
        </div>
        </div>
        </div>
     `;
      document.getElementById('inputCliente').innerHTML =  mandar; 
    }
</script>


